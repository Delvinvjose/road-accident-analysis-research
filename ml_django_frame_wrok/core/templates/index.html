<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Accident Risk — Test</title>
  <style>
    body{font-family:system-ui,Arial;padding:20px;max-width:980px;margin:auto}
    form{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    label{display:flex;flex-direction:column;font-size:14px}
    input,select,button{padding:8px;font-size:14px}
    .row-2{grid-column:1 / span 2}
    .card{border:1px solid #ddd;padding:12px;border-radius:8px;margin-top:16px}
  </style>
</head>
<body>
  <h1>Accident Risk - Test</h1>

  {% if error %}<div class="card" style="border-color:#b00;color:#900">Error: {{ error }}</div>{% endif %}
  {% if result is not None %}
    <div class="card">
      <strong>{{ label_text }}</strong><br>
      {% if proba is not None %}
        <strong>Probability:</strong> {{ proba|floatformat:3 }}
        {% if risk_band %} — <strong>Risk:</strong> {{ risk_band }}{% endif %}
      {% endif %}
    </div>
  {% endif %}

  <form method="post" action="/predict/">{% csrf_token %}
    <!-- Location & time -->
    <label>Latitude<input name="latitude" type="number" step="any" required></label>
    <label>Longitude<input name="longitude" type="number" step="any" required></label>
    <label>Date<input name="date" type="date" required></label>
    <label>Time<input name="time" type="time" required></label>

    <!-- Numeric driver/vehicle -->
    <label>Age of driver<input name="age_of_driver" type="number" min="-1" max="100" required></label>
    <label>Engine capacity (cc)<input name="engine_capacity_cc" type="number" min="-1" max="10000" required></label>
    <label>Age of vehicle<input name="age_of_vehicle" type="number" min="-1" max="60" required></label>
    <label>Driver IMD decile<input name="driver_imd_decile" type="number" min="-1" max="10" required></label>

    <!-- Categorical code selects -->
    <label class="row-2">Towing & articulation
      <select name="towing_and_articulation" required>
        <option value="-1">-1 — Unknown</option>
        <option value="0">0 — No tow/articulation</option>
        <option value="1">1 — Articulated</option>
        <option value="3">3 — Caravan</option>
        <option value="4">4 — Single trailer</option>
        <option value="5">5 — Other tow</option>
        <option value="9">9 — Other/unspecified</option>
      </select>
    </label>

    <label>Driver home area type
      <select name="driver_home_area_type" required>
        <option value="-1">-1 — Unknown</option>
        <option value="1">1 — Urban</option>
        <option value="2">2 — Rural</option>
        <option value="3">3 — Other</option>
      </select>
    </label>

    <label>Vehicle type
      <select name="vehicle_type" required>
        <option value="-1">-1 — Unknown</option>
        <option value="1">01 — Pedal cycle</option>
        <option value="2">02 — MC ≤50cc</option>
        <option value="3">03 — MC >50–125cc</option>
        <option value="4">04 — MC >125–500cc</option>
        <option value="5">05 — MC >500cc</option>
        <option value="8">08 — Taxi/PHV</option>
        <option value="9">09 — Car</option>
        <option value="10">10 — Minibus</option>
        <option value="11">11 — Bus/coach</option>
        <option value="16">16 — Ridden horse</option>
        <option value="17">17 — Agricultural</option>
        <option value="18">18 — Tram/Light rail</option>
        <option value="19">19 — Van ≤3.5t</option>
        <option value="20">20 — Goods >3.5t &lt;7.5t</option>
        <option value="21">21 — Goods ≥7.5t</option>
        <option value="22">22 — Mobility scooter</option>
        <option value="23">23 — Electric MC</option>
        <option value="90">90 — Other vehicle</option>
        <option value="97">97 — MC unknown cc</option>
        <option value="98">98 — Goods unknown wt</option>
        <option value="99">99 — Data missing</option>
      </select>
    </label>

    <label>Driver distance banding
      <select name="driver_distance_banding" required>
        <option value="-1">-1 — Unknown</option>
        <option value="1">1 — 0–1</option>
        <option value="2">2 — 1–5</option>
        <option value="3">3 — 5–10</option>
        <option value="4">4 — 10–20</option>
        <option value="5">5 — 20–50/≥50</option>
      </select>
    </label>

    <label>Sex of driver
      <select name="sex_of_driver" required>
        <option value="-1">-1 — Not known</option>
        <option value="1">1 — Male</option>
        <option value="2">2 — Female</option>
        <option value="3">3 — Other/unspec</option>
      </select>
    </label>

    <label class="row-2">Journey purpose of driver
      <select name="journey_purpose_of_driver" required>
        <option value="-1">-1 — Not known</option>
        <option value="1">1 — Part of work</option>
        <option value="2">2 — Commuting</option>
        <option value="3">3 — Taking pupil</option>
        <option value="4">4 — Pupil riding</option>
        <option value="5">5 — Other</option>
        <option value="6">6 — Not known (code)</option>
      </select>
    </label>

    <label class="row-2">Age band of driver
      <select name="age_band_of_driver" required>
        <option value="-1">-1 — Unknown</option>
        <option value="1">1</option><option value="2">2</option><option value="3">3</option>
        <option value="4">4</option><option value="5">5</option><option value="6">6</option>
        <option value="7">7</option><option value="8">8</option><option value="9">9</option>
        <option value="10">10</option><option value="11">11</option>
      </select>
    </label>

    <button class="row-2" type="submit">Predict</button>
  </form>
</body>
</html>
